# Dpdata Toolkit

```bash
ai2-kit tool dpdata
```
This toolkit is a command line wrapper of [dpdata](https://github.com/deepmodeling/dpdata) to allow user to process DeepMD dataset via command line.

## Usage

This toolkit include the following commands:

| Command | Description | Example | Reference |
| --- | --- | --- | --- |
| read | Read dataset into memory. This command by itself is useless, you should chain other command after reading data into memory. | `ai2-kit tool dpdata read ./path/to/dataset --fmt deepmd/npy` | Support wildcard, can be call multiple time |
| merge_write | Use MultiSystems to merge dataset and write to directory. | `ai2-kit tool dpdata read ./path/to/dataset --fmt deepmd/npy - merge_write ./path/to/merged_dataset` | |

Those commands are chainable and can be used to process trajectory in a pipeline fashion (separated by `-`). For more information, please refer to the following examples.

## Example

```bash
# read multiple dataset generated by training workflow by wildcard and merge them into a single dataset
# you can also call `read` multiple times to read multiple dataset from different directory

ai2-kit tool dpdata read ./workdir/iters-*/train-deepmd/converted_new_data/* --fmt deepmd/npy - merge_write ./merged_dataset  --fmt deepmd/npy

# You can also save data with hdf5 format
ai2-kit tool dpdata read ./workdir/iters-*/train-deepmd/converted_new_data/* --fmt deepmd/npy - merge_write ./merged.hdf5 --fmt deepmd/hdf5
```